---
layout: docs
page_title: GRPCRoute resource configuration reference
description: The GRPCRoute resource CRD configures L7 GRPC traffic behavior within the service mesh. GRPCRoute is a GAMMA resource that requires the v2 catalog API. Learn how to configure the GRPCRoute CRD with specifications and example configurations.
---

# GRPCRoute resource configuration reference

This page provides reference information for the GRPCRoute resource, which defines L7 GRPC traffic within the service mesh.

This custom resource definition (CRD) describes a GAMMA resource that requires the [v2 catalog API](/consul/docs/architecture/catalog/v2). It is not compatible with the [v1 catalog API](/consul/docs/architecture/catalog/v1). For more information about GAMMA resources, refer to the [Kubernetes Gateway API documentation](https://gateway-api.sigs.k8s.io/concepts/gamma/).

## Configuration model

The following list outlines field hierarchy, language-specific data types, and requirements in a GRPCRoute CRD. Click on a property name to view additional details, including default values.

- [`elem_a`](#elema): data type | default
- [`elem_b`](#elemb): data type | default
- [`spec`](#elemb): data type | default
- [`elem_ba`](#elembelemba): data type | default
- [`elem_baa`](#elembelembaelembaa): data type | default
- [`elem_baaa`](#elembelembaelembaa): data type | default
- [`elem_baab`](#elembelembaelembaa): data type | default
- [`elem_baac`](#elembelembaelembaa): data type | default
- [`element_bab`](#elembelembaelembab): data type | default

## Complete configuration

When every field is defined, a GRPCRoute CRD has the following form:

```yaml
apiVersion: mesh.consul.hashicorp.com/v2beta1        # required
kind: HTTPRoute                                      # required
metadata:
hostnames: 
spec:
  parentRefs:
    port:
    ref:
      name:
      section:
      tenancy:
        namespace:
        partition:
        peerName:
        type:
          group:
          groupVersion:
          kind:
    rules:
      backendRefs:
        backendRef:
          datacenter:
          port:
          ref:
            name:
            tenancy:
              namespace:
              partition:
              peerName:
            type:
              group:
              groupVersion:
              kind:
        filters:
          requestHeaderModifier:
            add:
              name:
              value:
            remove:
              name:
              value:
            set:
              name:
              value:
          responseHeaderModifier:
            add:
              name:
              value:
            remove:
              name:
              value:
            set:
              name:
              value:
          urlRewrite:
            pathPrefix:
        weight:
      filters:
        requestHeaderModifier:
          add:
            name:
            value:
          remove:
            name:
            value:
          set:
            name:
            value:
        responseHeaderModifier:
          add:
            name:
            value:
          remove:
            name:
            value:
          set:
            name:
            value:                             
        urlRewrite:
          pathPrefix:
        matches:
          headers:
            invert:
            name:
            type:
          method:
          path:
            type:
          queryParams:
            name:
            type:
      retries:
        number:
          onConditions:
          onConnectFailure:
          onStatusCodes:
        timeouts:
          idle:
            nanos:
            seconds:
          request:
            nanos:
            seconds:
          status:
              conditions:
                lastTransitionTime:
                  message:
                  reason:
                  status:
                  type:
                lastSyncedTime:
``` 

## Specification

This section provides details about the fields you can configure in the GRPCRoute CRD.

### `apiVersion`

Specifies the version of the Consul API for integrating with Kubernetes. The value must be `mesh.consul.hashicorp.com/v2beta1`.

#### Values

- Default: None
- This field is required.
- String value that must be set to `mesh.consul.hashicorp.com/v2beta1`.

### `kind`

Specifies the type of CRD to implement. Must be set to `HTTPRoute`.

#### Values

- Default: None
- This field is required.
- Data type: String value that must be set to `HTTPRoute`.

## `metadata`

Map that contains an arbitrary name for the CRD and the namespace it applies to.

#### Values

- Default: None
- Data type: Map

### `metadata.name`

Specifies a name for the CRD. The name is metadata that you can use to reference the resource when performing Consul operations, such as using the `consul resource` command. Refer to [`consul resource`](/consul/docs/k8s/connect/multiport/reference/resource-command) for more information.

#### Values

- Default: None
- This field is required.
- Data type: String

### `metadata.namespace` <EnterpriseAlert inline />

Specifies the namespace that the service resolver applies to. Refer to [namespaces](/consul/docs/enterprise/namespaces) for more information.

#### Values

- Default: None
- Data type: String

### `spec`

Map that contains the details about the `GRPCRoute` CRD. The `apiVersion`, `kind`, and `metadata` fields are siblings of the spec field. All other configurations are children.

When using this CRD, the `spec` field must align with GAMMAs resource. Refer to [GRPCRoute in the Kubernetes documentation](https://gateway-api.sigs.k8s.io/references/spec/#gateway.networking.k8s.io/v1alpha2.GRPCRoute).

#### Values

- Default: None
- This field is required.
- Data type: Map

### `spec.parentRefs`

References the resources (usually Services)
                  that a Route wants to be attached to. \n It is invalid to reference
                  an identical parent more than once. It is valid to reference multiple
                  distinct sections within the same parent resource.

#### Values

- Default: None
- This field is required.
- Data type: Map

### `spec.parentRefs.port`

For east/west this is the name of the Consul Service
                        port to direct traffic to or empty to imply all.

#### Values

- Default: None
- Data type: String

### `spec.parentRefs.ref`

For east/west configuration, this should point
                        to a Service.

#### Values

- Default: None
- Data type: Map

## Examples

If you have more than one example to show, create an Examples section 
(general block) and introduce the examples per the style guide.

### Specific use case 

Introduce examples clearly and help readers understand the connections 
between the example snippet and the configuration element you are trying to 
explain. Use phrases such as "In the following example, the `elem` performs 
some action on a service named `service-name`". 


```yaml
apiVersion: mesh.consul.hashicorp.com/v2beta1
kind: GRPCRoute
metadata:
  name: api-split
  namespace: default
spec:
  parentRefs:
    - ref:
        type: 
          group: catalog
          groupVersion: v2beta1
          kind: Service
        name: api
      # Note that right now, we must target the workload port,
      # not the service port. This is likely to change in 1.18+.
      port: "api-workload"
  rules:
    - backendRefs:
      - backendRef:
          ref: 
            type:
              group: catalog
              groupVersion: v2beta1
              kind: Service
            name: api
          # Note that right now, we must target the workload port,
          # not the service port. This is likely to change in 1.18+.
          port: "api-workload"
        weight: 50
      - backendRef:
          ref: 
            type:
              group: catalog
              groupVersion: v2beta1
              kind: Service
            name: api
          # Note that right now, we must target the workload port,
          # not the service port. This is likely to change in 1.18+.
          port: "admin-workload"
        weight: 50
```
