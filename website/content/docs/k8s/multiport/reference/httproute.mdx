---
layout: docs
page_title: HTTPRoute resource configuration reference
description: The HTTPRoute resource CRD configures L7 GRPC traffic behavior within the service mesh. GRPCRoute is a GAMMA resource that requires the v2 catalog API. Learn how to configure the HTTPRoute CRD with specifications and example configurations.
---

# HTTPRoute resource configuration reference

This page provides reference information for the GRPCRoute resource, which defines L7 GRPC traffic within the service mesh.

This custom resource definition (CRD) describes a GAMMA resource that requires the [v2 catalog API](/consul/docs/architecture/catalog/v2). It is not compatible with the [v1 catalog API](/consul/docs/architecture/catalog/v1). For more information about GAMMA resources, refer to the [Kubernetes Gateway API documentation](https://gateway-api.sigs.k8s.io/concepts/gamma/).

## Configuration model

The following list outlines field hierarchy, language-specific data types, and requirements in an HTTPRoute CRD. Click on a property name to view additional details, including default values.

- [`apiVersion`](#apiversion): string | required
- [`kind`](#kind): string | required
- [`metadata`](#metadata): object | required
	- [`name`](#metadata-name): string | required
	- [`namespace`](#metadata-namespace): string | optional <EnterpriseAlert inline />
- [`spec`](#spec): object | required
	- [`parentRefs`](#spec-parentrefs): 
		- [`ref`](#spec-parentrefs-ref): 
			- [`type`](#spec-parentrefs-ref-type): 
- [`group`]
- [`groupVersion`]
- [`kind`]
- [`name`]
- [`section`]
- [`tenancy`]
	- [`namespace`]
	- [`partition`]
	- [`peerName`]
		- [‘port’]
	- [`rules`](#spec-rules): 
		- [`backendRefs`]
			- [`backendRef`]
				- [`ref`]
					- [`type`]
						- [`group`]
						- [`groupVersion`]
						- [`kind`]
					- [`name`]
					- [`section`]
					- [`tenancy`]
			- [`namespace`]
			- [`partition`]
			- [`peerName`]
				- [`datacenter`]
- [`port`]
- [`weight`]

## Complete configuration

When every field is defined, an HTTPRoute CRD has the following form:

```yaml
apiVersion: mesh.consul.hashicorp.com/v2beta1       
kind: HTTPRoute
metadata:
  name: <resourceName>
  namespace: <namespace>
hostnames: 
spec:
  parentRefs:
    port:
    ref:
      name:
      section:
      tenancy:
        namespace:
        partition:
        peerName:
        type:
          group:
          groupVersion:
          kind:
    rules:
      backendRefs:
        backendRef:
          datacenter:
          port:
          ref:
            name:
            tenancy:
              namespace:
              partition:
              peerName:
            type:
              group:
              groupVersion:
              kind:
        filters:
          requestHeaderModifier:
            add:
              name:
              value:
            remove:
              name:
              value:
            set:
              name:
              value:
          responseHeaderModifier:
            add:
              name:
              value:
            remove:
              name:
              value:
            set:
              name:
              value:
          urlRewrite:
            pathPrefix:
        weight:
      filters:
        requestHeaderModifier:
          add:
            name:
            value:
          remove:
            name:
            value:
          set:
            name:
            value:
        responseHeaderModifier:
          add:
            name:
            value:
          remove:
            name:
            value:
          set:
            name:
            value:                             
        urlRewrite:
          pathPrefix:
        matches:
          headers:
            invert:
            name:
            type:
          method:
          path:
            type:
          queryParams:
            name:
            type:
      retries:
        number:
          onConditions:
          onConnectFailure:
          onStatusCodes:
        timeouts:
          idle:
            nanos:
            seconds:
          request:
            nanos:
            seconds:
          status:
              conditions:
                lastTransitionTime:
                  message:
                  reason:
                  status:
                  type:
                lastSyncedTime:
``` 

## Specification

The specification block contains the details about each configuration. It 
is a flattened representation of the configuration model block that allows 
for extended descriptions, examples, and other information to help readers 
understand the behavior of the configurations. 

### `Elem_a`

Use this space to thoroughly, but succinctly, document the configuration 
item. This format is intended to allow you to create complete documentation, 
however, _stay within the scope of the reference_. If the description 
deviates from the reference material, create a new Concept topic or add the 
information to an existing Concept.

#### Values

- Default: default value or none
- This field is required. <Omit this line of the field is optional)
- Data type: data type

Specify any additional information about the values that you can specify.     

### `Elem_b`

Add your description. You can include example configurations and describe 
any dependencies or cascading effects that the configuration may have.

#### Values

- Default: default value or none
- This field is required. <Omit this line of the field is optional)
- Data type: data type

Specify any additional information about the values that you can specify. 

## Examples

If you have more than one example to show, create an Examples section 
(general block) and introduce the examples per the style guide.

### Specific use case 

Introduce examples clearly and help readers understand the connections 
between the example snippet and the configuration element you are trying to 
explain. Use phrases such as "In the following example, the `elem` performs 
some action on a service named `service-name`". 


```yaml
apiVersion: mesh.consul.hashicorp.com/v2beta1
kind: HTTPRoute
metadata:
  name: api-split
  namespace: default
spec:
  parentRefs:
    - ref:
        type: 
          group: catalog
          groupVersion: v2beta1
          kind: Service
        name: api
      # Note that right now, we must target the workload port,
      # not the service port. This is likely to change in 1.18+.
      port: "api-workload"
  rules:
    - backendRefs:
      - backendRef:
          ref: 
            type:
              group: catalog
              groupVersion: v2beta1
              kind: Service
            name: api
          # Note that right now, we must target the workload port,
          # not the service port. This is likely to change in 1.18+.
          port: "api-workload"
        weight: 50
      - backendRef:
          ref: 
            type:
              group: catalog
              groupVersion: v2beta1
              kind: Service
            name: api
          # Note that right now, we must target the workload port,
          # not the service port. This is likely to change in 1.18+.
          port: "admin-workload"
        weight: 50
```
