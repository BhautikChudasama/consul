---
layout: docs
page_title: Requirements
description: >-
  Learn about the components and configuration required to operate Consul-Terraform-Sync (CTS), including Terraform provider, Terraform module, and Consul cluster requirements.
---

# Requirements

This topic describes the components required to run Consul-Terraform-Sync (CTS). Refer to [Network infrastructure automation overview](/consul/docs/cts) for information about how CTS automates network infrastructure provisioning when it detects changes to the service mesh.

## Overview

The following components are required to run Consul-Terraform-Sync (CTS):

- **Consul cluster**: A Consul cluster compatible with your version of CTS must run outside of the `consul-terraform-sync` daemon. Refer to the [Consul cluster requirement details](#consul-cluster-requirement-details) for information about version compatibility.
- **Terraform configuration**: You must specify a provider, a CTS-compatible module, and a network driver. Refer to [Terraform configuration details](#terraform-configuration-details) for additional information.
- At least one service must be registered with Consul for CTS to monitor changes. Refer to [Services](/consul/docs/register/service) for details on how to configure and register services.

Refer to [Configuration](/consul/docs/cts/configure) for information about configuring CTS and how to use Terraform providers and modules for tasks.

## Consul cluster requirement details

Start a Consul cluster that is compatible with your version of CTS. Refer to the following topics for instructions on starting multiple Consul agents and joining them into a cluster and version compatibility:

- [Deploy Consul servers overview](/consul/docs/deploy/server)
- [Consul compatibility matrix](/consul/docs/reference/cts/compatibility/)

For testing and non-production environments, at least one Consul agent must be running. Refer to the [Consul agent documentation](/consul/docs/deploy/server) for information about configuring and starting a Consul agent.

### Consul agent request limits

CTS uses [blocking queries](/consul/api-docs/features/blocking) to monitor task dependencies, such as changes to registered services. This results in multiple long-running TCP connections between CTS and the Consul agent to poll changes for each dependency.

To avoid reaching the Consul agent connection limit, you should configure Consul to communicate with CTS over HTTP/2, which requires HTTPS. When using HTTP/2, CTS establishes a single connection and reuses it for all communication. Refer to the [CTS configuration reference](/consul/docs/reference/cts/configure) for additional information.

Alternatively, you can configure the [`limits.http_max_conns_per_client`](/consul/docs/reference/agent#http_max_conns_per_client) option to set a maximum number of connections to meet your needs.

## Terraform configuration details

Your Terraform configuration must include the following components.

### Provider

Providers are plug-ins that enable Terraform to interact with cloud service providers and other infrastructure management software. Refer to [Providers](/terraform/language/providers) in the Terraform documentation for additional information. You can find publicly-available providers for the infrastructure platforms you use in the [Terraform registry](https://registry.terraform.io/browse/providers).

If a Terraform provider does not already exist for your environment, you can create a new Terraform provider and publish it to the registry so that you can use it within a network integration task or create a compatible Terraform module.

Refer to [Terraform Plugin Framework](/terraform/plugin/framework) in the Terraform documentation for additional information on creating and publishing providers.

### Module

The Terraform module for a task in CTS is the core component of the integration. It declares which resources to use and how your infrastructure is dynamically updated. The module and task configuration determine the conditions under which your infrastructure is updated.

Refer to [Create a Terraform module](/consul/docs/cts/create-terrform-module) for instructions on how to create a compatible module.

You can also use the following CTS-compatible modules built by HashiCorp partners:

| Partner | Description                                      | Links                                                                                                                                                                                                          |
| --- |--------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| A10 Networks | Dynamic load balancing with group member updates | [Terraform registry](https://registry.terraform.io/modules/a10networks/service-group-sync-nia/thunder/latest)<br/><br/>[GitHub](https://github.com/a10networks/terraform-thunder-service-group-sync-nia) |
| Avi Networks | Scale pool and pool members up and down (servers) | [GitHub](https://github.com/vmware/terraform-provider-avi/tree/20.1.5/modules/nia/pool)                                                                                                                        |
| AWS Application Load Balancer (ALB) | Create a listener rule and target group for an AWS ALB and forward traffic to a Consul ingress gateway | [Terraform registry](https://registry.terraform.io/modules/aws-quickstart/cts-alb_listener-nia/hashicorp/latest)<br/><br/>[GitHub](https://github.com/aws-quickstart/terraform-hashicorp-cts-alb_listener-nia) |
| Checkpoint | Dynamic firewalling with address object updates | [Terraform registry](https://registry.terraform.io/modules/CheckPointSW/dynobj-nia/checkpoint/latest)<br/><br/>[GitHub](https://github.com/CheckPointSW/terraform-checkpoint-dynobj-nia)                       |
| Cisco ACI | Policy-based redirection | [Terraform registry](https://registry.terraform.io/modules/CiscoDevNet/autoscaling-nia/aci/latest)<br/><br/>[GitHub](https://github.com/CiscoDevNet/terraform-aci-autoscaling-nia)                             |
| Cisco ACI | Create and update Cisco ACI endpoint security groups | [Terraform Registry](https://registry.terraform.io/modules/CiscoDevNet/esg-nia/aci/latest)<br/><br/>[GitHub](https://github.com/CiscoDevNet/terraform-aci-esg-nia)                                             |
| Citrix ADC | Create, update, and delete service groups in Citrix ADC | [Terraform Registry](https://registry.terraform.io/modules/citrix/servicegroup-consul-sync-nia/citrixadc/latest)<br/><br/>[GitHub](https://github.com/citrix/terraform-citrixadc-servicegroup-consul-sync-nia) |
| F5 | Dynamic load balancing with pool member updates | [Terraform Registry](https://registry.terraform.io/modules/f5devcentral/app-consul-sync-nia/bigip/latest)<br/><br/>[GitHub](https://github.com/f5devcentral/terraform-bigip-app-consul-sync-nia) | 
| NS1 | Create, delete, and update DNS records and zones | [Terraform Registry](https://registry.terraform.io/modules/ns1-terraform/record-sync-nia/ns1/latest)<br/><br/>[GitHub](https://github.com/ns1-terraform/terraform-ns1-record-sync-nia) |
| Palo Alto Networks | Dynamic address group (DAG) tags | [Terraform Registry](https://registry.terraform.io/modules/PaloAltoNetworks/dag-nia/panos/latest)<br/><br/>[GitHub](https://github.com/PaloAltoNetworks/terraform-panos-dag-nia) | 
| Palo Alto Networks | Address group and dynamic address group (DAG) tags | [Terraform Registry](https://registry.terraform.io/modules/PaloAltoNetworks/ag-dag-nia/panos/latest)<br/><br/>[GitHub](https://github.com/PaloAltoNetworks/terraform-panos-ag-dag-nia) |

### Network driver

You can use either the Terraform driver or the Terraform Cloud driver. Consul Enterprise is required to use the Terraform Cloud driver, which requires additional setup. Refer to has [Setting up a Terraform Cloud driver](/consul/docs/cts/network-drivers/terraform-cloud#setting-up-terraform-cloud-driver) for instructions.
