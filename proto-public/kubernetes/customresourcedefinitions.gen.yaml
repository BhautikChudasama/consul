# DO NOT EDIT - Generated by Consul OpenAPI generators.
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    "helm.sh/resource-policy": keep
  name: trafficpermissions.auth.consul.hashicorp.com
spec:
  group: auth.consul.hashicorp.com
  names:
    kind: TrafficPermissions
    listKind: TrafficPermissionsList
    plural: trafficpermissions
    singular: trafficpermissions
  scope: Namespaced
  versions:
  - name: v2beta1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            description: <!-- crd generation tags +gen-crd:TrafficPermissions:groupName:auth.consul.hashicorp.com
              +gen-crd:TrafficPermissions:version:v2beta1 +gen-crd:TrafficPermissions:annotations:helm.sh/resource-policy=keep
              +gen-crd:TrafficPermissions:subresource:status +gen-crd:TrafficPermissions:scope:Namespaced
              that should apply these routes" representing the server time when this
              object was created.
            properties:
              action:
                description: Action can be either allow or deny for the entire object.
                enum:
                - ACTION_UNSPECIFIED
                - ACTION_DENY
                - ACTION_ALLOW
                type: string
              destination:
                description: Destination is a configuration of the destination proxies
                  where these traffic permissions should apply.
                properties:
                  identityName:
                    type: string
                type: object
              permissions:
                description: Permissions is a list of permissions to match on.
                items:
                  properties:
                    destinationRules:
                      description: DestinationRules is a list of rules to apply for
                        matching sources in this Permission.
                      items:
                        properties:
                          exclude:
                            description: Exclude contains a list of rules to exclude
                              when evaluating rules for the incoming connection.
                            items:
                              properties:
                                headers:
                                  items:
                                    properties:
                                      exact:
                                        type: string
                                      invert:
                                        type: boolean
                                      name:
                                        type: string
                                      prefix:
                                        type: string
                                      present:
                                        type: boolean
                                      regex:
                                        type: string
                                      suffix:
                                        type: string
                                    type: object
                                  type: array
                                methods:
                                  description: Methods is the list of HTTP methods.
                                  items:
                                    type: string
                                  type: array
                                pathExact:
                                  type: string
                                pathPrefix:
                                  type: string
                                pathRegex:
                                  type: string
                                portNames:
                                  description: PortNames is a list of workload ports
                                    to apply this rule to.
                                  items:
                                    type: string
                                  type: array
                              type: object
                            type: array
                          headers:
                            items:
                              properties:
                                exact:
                                  type: string
                                invert:
                                  type: boolean
                                name:
                                  type: string
                                prefix:
                                  type: string
                                present:
                                  type: boolean
                                regex:
                                  type: string
                                suffix:
                                  type: string
                              type: object
                            type: array
                          methods:
                            description: Methods is the list of HTTP methods.
                            items:
                              type: string
                            type: array
                          pathExact:
                            type: string
                          pathPrefix:
                            type: string
                          pathRegex:
                            type: string
                          portNames:
                            items:
                              type: string
                            type: array
                        type: object
                      type: array
                    sources:
                      description: Sources is a list of sources in this traffic permission.
                      items:
                        properties:
                          exclude:
                            description: Exclude is a list of sources to exclude from
                              this source.
                            items:
                              properties:
                                identityName:
                                  type: string
                                namespace:
                                  type: string
                                partition:
                                  type: string
                                peer:
                                  type: string
                                samenessGroup:
                                  type: string
                              type: object
                            type: array
                          identityName:
                            type: string
                          namespace:
                            type: string
                          partition:
                            type: string
                          peer:
                            type: string
                          samenessGroup:
                            type: string
                        type: object
                      type: array
                  type: object
                type: array
            type: object
          status:
            type: object
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: false
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    "helm.sh/resource-policy": keep
  name: destinations.mesh.consul.hashicorp.com
spec:
  group: mesh.consul.hashicorp.com
  names:
    kind: Destinations
    listKind: DestinationsList
    plural: destinations
    singular: destinations
  scope: Namespaced
  versions:
  - name: v2beta1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            description: This is the description of destinations.
            properties:
              destinations:
                description: Destinations is the list of explicit destinations to
                  define for the selected workloads.
                items:
                  oneOf:
                  - not:
                      anyOf:
                      - required:
                        - ipPort
                      - required:
                        - unix
                  - required:
                    - ipPort
                  - required:
                    - unix
                  properties:
                    datacenter:
                      description: Datacenter is the datacenter for where this destination
                        service lives.
                      type: string
                    destinationPort:
                      description: DestinationPort is the port of the destination
                        service.
                      type: string
                    destinationRef:
                      description: DestinationRef is the reference to an destination
                        service.
                      properties:
                        name:
                          description: Name is the user-given name of the resource
                            (e.g.
                          type: string
                        section:
                          description: Section identifies which part of the resource
                            the condition relates to.
                          type: string
                        tenancy:
                          description: Tenancy identifies the tenancy units (i.e.
                          properties:
                            namespace:
                              description: Namespace further isolates resources within
                                a partition.
                              type: string
                            partition:
                              description: Partition is the topmost administrative
                                boundary within a cluster.
                              type: string
                          type: object
                        type:
                          description: Type identifies the resource's type.
                          properties:
                            group:
                              description: Group describes the area of functionality
                                to which this resource type relates (e.g.
                              type: string
                            groupVersion:
                              description: GroupVersion is incremented when sweeping
                                or backward-incompatible changes are made to the group's
                                resource types.
                              type: string
                            kind:
                              description: Kind identifies the specific resource type
                                within the group.
                              type: string
                          type: object
                      type: object
                    ipPort:
                      properties:
                        ip:
                          description: ip is an IPv4 or an IPv6 address.
                          type: string
                        port:
                          description: port is the port number.
                          type: integer
                      type: object
                    unix:
                      properties:
                        mode:
                          description: Mode is the Unix file mode for the socket file.
                          type: string
                        path:
                          description: Path is the file system path at which to bind
                            a Unix domain socket listener.
                          type: string
                      type: object
                  type: object
                type: array
              pqDestinations:
                description: PQDestinations is the list of prepared query destinations.
                items:
                  oneOf:
                  - not:
                      anyOf:
                      - required:
                        - tcp
                      - required:
                        - unix
                  - required:
                    - tcp
                  - required:
                    - unix
                  properties:
                    datacenter:
                      description: Datacenter is the datacenter for where this destination
                        service lives.
                      type: string
                    destinationConfig:
                      properties:
                        balanceOutboundConnections:
                          description: BalanceOutboundConnections indicates how the
                            proxy should attempt to distribute connections across
                            worker threads.
                          enum:
                          - BALANCE_CONNECTIONS_DEFAULT
                          - BALANCE_CONNECTIONS_EXACT
                          type: string
                        connectTimeout:
                          description: ConnectTimeout is the timeout used when making
                            a new connection to this destination.
                          type: string
                        limits:
                          description: Limits are the set of limits that are applied
                            to the proxy for a specific destination.
                          properties:
                            maxConcurrentRequests:
                              description: MaxConcurrentRequests is the maximum number
                                of in-flight requests that will be allowed to the
                                destination cluster at a point in time.
                              nullable: true
                              type: integer
                            maxConnections:
                              description: MaxConnections is the maximum number of
                                connections the local proxy can make to the destination
                                service.
                              nullable: true
                              type: integer
                            maxPendingRequests:
                              description: MaxPendingRequests is the maximum number
                                of requests that will be queued waiting for an available
                                connection.
                              nullable: true
                              type: integer
                          type: object
                        meshGatewayMode:
                          description: MeshGatewayMode is the Mesh Gateway routing
                            mode.
                          enum:
                          - MESH_GATEWAY_MODE_UNSPECIFIED
                          - MESH_GATEWAY_MODE_NONE
                          - MESH_GATEWAY_MODE_LOCAL
                          - MESH_GATEWAY_MODE_REMOTE
                          type: string
                        passiveHealthCheck:
                          description: PassiveHealthCheck configuration determines
                            how destination proxy instances will be monitored for
                            removal from the load balancing pool.
                          properties:
                            enforcingConsecutive5xx:
                              description: EnforcingConsecutive5XX is the % chance
                                that a host will be actually ejected when an outlier
                                status is detected through consecutive 5xx.
                              type: integer
                            interval:
                              description: Interval between health check analysis
                                sweeps.
                              type: string
                            maxFailures:
                              description: MaxFailures is the count of consecutive
                                failures that results in a host being removed from
                                the pool.
                              type: integer
                          type: object
                        protocol:
                          description: Protocol overrides destination's port protocol.
                          enum:
                          - PROTOCOL_UNSPECIFIED
                          - PROTOCOL_TCP
                          - PROTOCOL_HTTP
                          - PROTOCOL_HTTP2
                          - PROTOCOL_GRPC
                          - PROTOCOL_MESH
                          type: string
                      type: object
                    name:
                      description: Name is the name of the prepared query to use as
                        an destination.
                      type: string
                    tcp:
                      properties:
                        ip:
                          description: ip is an IPv4 or an IPv6 address.
                          type: string
                        port:
                          description: port is the port number.
                          type: integer
                      type: object
                    unix:
                      properties:
                        mode:
                          description: Mode is the Unix file mode for the socket file.
                          type: string
                        path:
                          description: Path is the file system path at which to bind
                            a Unix domain socket listener.
                          type: string
                      type: object
                  type: object
                type: array
              workloads:
                description: Selection of workloads these destinations should apply
                  to.
                properties:
                  filter:
                    type: string
                  names:
                    items:
                      type: string
                    type: array
                  prefixes:
                    items:
                      type: string
                    type: array
                type: object
            type: object
          status:
            type: object
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: false
    subresources:
      status: {}
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    "helm.sh/resource-policy": keep
  name: proxyconfigurations.mesh.consul.hashicorp.com
spec:
  group: mesh.consul.hashicorp.com
  names:
    kind: ProxyConfiguration
    listKind: ProxyConfigurationList
    plural: proxyconfigurations
    singular: proxyconfiguration
  scope: Namespaced
  versions:
  - name: v2beta1
    schema:
      openAPIV3Schema:
        properties:
          spec:
            description: <!-- crd generation tags +gen-crd:ProxyConfiguration:groupName:mesh.consul.hashicorp.com
              +gen-crd:ProxyConfiguration:version:v2beta1 +gen-crd:ProxyConfiguration:annotations:helm.sh/resource-policy=keep
              +gen-crd:ProxyConfiguration:subresource:status +gen-crd:ProxyConfiguration:scope:Namespaced
              that should apply these routes" representing the server time when this
              object was created.
            properties:
              bootstrapConfig:
                description: bootstrap_config is the configuration that requires proxies
                  to be restarted to be applied.
                properties:
                  dogstatsdUrl:
                    type: string
                  overrideJsonTpl:
                    type: string
                  prometheusBindAddr:
                    type: string
                  readyBindAddr:
                    type: string
                  staticClustersJson:
                    type: string
                  staticListenersJson:
                    type: string
                  statsBindAddr:
                    type: string
                  statsConfigJson:
                    type: string
                  statsFlushInterval:
                    type: string
                  statsSinksJson:
                    type: string
                  statsTags:
                    items:
                      type: string
                    type: array
                  statsdUrl:
                    type: string
                  telemetryCollectorBindSocketDir:
                    type: string
                  tracingConfigJson:
                    type: string
                type: object
              dynamicConfig:
                description: dynamic_config is the configuration that could be changed
                  dynamically (i.e.
                properties:
                  accessLogs:
                    properties:
                      disableListenerLogs:
                        description: DisableListenerLogs turns off just listener logs
                          for connections rejected by Envoy because they don't have
                          a matching listener filter.
                        type: boolean
                      enabled:
                        type: boolean
                      jsonFormat:
                        description: The presence of one format string or the other
                          implies the access log string encoding.
                        type: string
                      path:
                        type: string
                      textFormat:
                        type: string
                      type:
                        description: 'Type selects the output for logs: "file", "stderr".'
                        enum:
                        - LOG_SINK_TYPE_DEFAULT
                        - LOG_SINK_TYPE_FILE
                        - LOG_SINK_TYPE_STDERR
                        - LOG_SINK_TYPE_STDOUT
                        type: string
                    type: object
                  exposeConfig:
                    properties:
                      exposePaths:
                        items:
                          properties:
                            listenerPort:
                              type: integer
                            localPathPort:
                              type: integer
                            path:
                              type: string
                            protocol:
                              enum:
                              - EXPOSE_PATH_PROTOCOL_HTTP
                              - EXPOSE_PATH_PROTOCOL_HTTP2
                              type: string
                          type: object
                        type: array
                    type: object
                  inboundConnections:
                    description: inbound_connections configures inbound connections
                      to the proxy.
                    properties:
                      balanceInboundConnections:
                        enum:
                        - BALANCE_CONNECTIONS_DEFAULT
                        - BALANCE_CONNECTIONS_EXACT
                        type: string
                      maxInboundConnections:
                        type: integer
                    type: object
                  listenerTracingJson:
                    type: string
                  localClusterJson:
                    type: string
                  localConnection:
                    additionalProperties:
                      properties:
                        connectTimeout:
                          type: string
                        requestTimeout:
                          type: string
                      type: object
                    description: local_connection is the configuration that should
                      be used to connect to the local application provided per-port.
                    type: object
                  localWorkloadAddress:
                    description: 'deprecated: local_workload_address, local_workload_port,
                      and local_workload_socket_path are deprecated and are only needed
                      for migration of existing resources.'
                    type: string
                  localWorkloadPort:
                    type: integer
                  localWorkloadSocketPath:
                    type: string
                  meshGatewayMode:
                    enum:
                    - MESH_GATEWAY_MODE_UNSPECIFIED
                    - MESH_GATEWAY_MODE_NONE
                    - MESH_GATEWAY_MODE_LOCAL
                    - MESH_GATEWAY_MODE_REMOTE
                    type: string
                  mode:
                    description: mode indicates the proxy's mode.
                    enum:
                    - PROXY_MODE_DEFAULT
                    - PROXY_MODE_TRANSPARENT
                    - PROXY_MODE_DIRECT
                    type: string
                  mutualTlsMode:
                    enum:
                    - MUTUAL_TLS_MODE_DEFAULT
                    - MUTUAL_TLS_MODE_STRICT
                    - MUTUAL_TLS_MODE_PERMISSIVE
                    type: string
                  publicListenerJson:
                    type: string
                  transparentProxy:
                    properties:
                      dialedDirectly:
                        description: dialed_directly indicates whether this proxy
                          should be dialed using original destination IP in the connection
                          rather than load balance between all endpoints.
                        type: boolean
                      outboundListenerPort:
                        description: outbound_listener_port is the port for the proxy's
                          outbound listener.
                        type: integer
                    type: object
                type: object
              opaqueConfig:
                description: 'deprecated: prevent usage when using v2 APIs directly.'
                type: object
                x-kubernetes-preserve-unknown-fields: true
              workloads:
                description: Selection of workloads this proxy configuration should
                  apply to.
                properties:
                  filter:
                    type: string
                  names:
                    items:
                      type: string
                    type: array
                  prefixes:
                    items:
                      type: string
                    type: array
                type: object
            type: object
          status:
            type: object
            x-kubernetes-preserve-unknown-fields: true
        type: object
    served: true
    storage: false
    subresources:
      status: {}
